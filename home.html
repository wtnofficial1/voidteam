<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<link rel="icon" href="anas.png" />
<title>الصفحة الرئيسية - VOID</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;800&display=swap" rel="stylesheet">
<style>
:root{
  --primary-purple:#5a28ff;
  --secondary-purple:#7b4dff;
  --accent-cyan:#22d3ee;
  --bg-dark:#081c39;
  --bg-darker:#0a0d14;
  --highlight:#6fffa3;
  --red:#ef4444;
  --verified-blue:#1d9bf0;
}

*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;overflow:hidden}

@keyframes gradientShift{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

@keyframes float{
  0%,100%{transform:translateY(0) rotate(0deg)}
  50%{transform:translateY(-20px) rotate(5deg)}
}

@keyframes pulse{
  0%,100%{transform:scale(1);opacity:0.3}
  50%{transform:scale(1.1);opacity:0.6}
}

@keyframes fadeInDown{
  from{opacity:0;transform:translateY(-30px)}
  to{opacity:1;transform:translateY(0)}
}

@keyframes scaleIn{
  from{transform:scale(0.9);opacity:0}
  to{transform:scale(1);opacity:1}
}

@keyframes glow{
  0%,100%{box-shadow:0 0 15px rgba(90,40,255,0.3)}
  50%{box-shadow:0 0 25px rgba(90,40,255,0.5)}
}

@keyframes numberPulse{
  0%,100%{transform:scale(1)}
  50%{transform:scale(1.03)}
}

body{
  font-family:'Cairo',sans-serif;
  background:linear-gradient(135deg,#081c39 0%,#0a0d14 100%);
  background-size:400% 400%;
  animation:gradientShift 15s ease infinite;
  display:flex;
  flex-direction:column;
  position:relative;
  overflow-x:hidden;
  overflow-y:auto;
}

body::before,body::after{
  content:'';
  position:fixed;
  border-radius:50%;
  filter:blur(100px);
  opacity:0.15;
  animation:float 8s ease-in-out infinite;
  pointer-events:none;
}

body::before{
  width:400px;
  height:400px;
  background:radial-gradient(circle,var(--primary-purple),transparent);
  top:-150px;
  right:-150px;
  animation-delay:0s;
}

body::after{
  width:350px;
  height:350px;
  background:radial-gradient(circle,var(--accent-cyan),transparent);
  bottom:-100px;
  left:-100px;
  animation-delay:4s;
}

.circle-decoration{
  position:fixed;
  border-radius:50%;
  border:2px solid rgba(90,40,255,0.2);
  animation:pulse 4s ease-in-out infinite;
  pointer-events:none;
}

.circle-1{width:250px;height:250px;top:10%;left:5%;animation-delay:0s}
.circle-2{width:180px;height:180px;bottom:15%;right:10%;animation-delay:2s}
.circle-3{width:120px;height:120px;top:50%;right:20%;animation-delay:1s}

.auth-warning{
  display:none;
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  background:rgba(0,0,0,0.9);
  border:2px solid var(--primary-purple);
  border-radius:20px;
  padding:40px;
  text-align:center;
  z-index:9999;
  animation:scaleIn 0.5s ease-out;
}

.auth-warning.show{
  display:block;
}

.auth-warning h2{
  color:#fff;
  font-size:2rem;
  margin-bottom:20px;
}

.auth-warning p{
  color:rgba(255,255,255,0.8);
  font-size:1.2rem;
}

.container{
  width:100%;
  position:relative;
  z-index:10;
  display:none;
  flex-direction:column;
  height:100vh;
}

.container.show{
  display:flex;
}

.top-navbar{
  background:rgba(0,0,0,0.65);
  backdrop-filter:blur(15px);
  border-bottom:1px solid rgba(90,40,255,0.3);
  padding:12px 15px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:15px;
  animation:fadeInDown 0.6s ease-out;
  box-shadow:0 4px 20px rgba(0,0,0,0.3);
}

.nav-section{
  display:flex;
  align-items:center;
  gap:10px;
}

.nav-section.center{
  flex:0 0 auto;
}

.nav-section.left,.nav-section.right{
  flex:1;
  justify-content:flex-start;
}

.nav-section.right{
  justify-content:flex-end;
}

.logo-text{
  font-size:1.5rem;
  font-weight:800;
  background:linear-gradient(135deg,var(--primary-purple),var(--accent-cyan));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  letter-spacing:3px;
  text-shadow:0 0 20px rgba(90,40,255,0.5);
  animation:gradientShift 3s ease infinite;
  background-size:200% 200%;
  white-space:nowrap;
}

.nav-btn{
  background:rgba(0,0,0,0.5);
  border:1px solid rgba(90,40,255,0.4);
  border-radius:10px;
  padding:8px 15px;
  color:#fff;
  text-decoration:none;
  font-size:0.9rem;
  font-weight:600;
  transition:all 0.3s ease;
  cursor:pointer;
  display:flex;
  align-items:center;
  gap:6px;
  white-space:nowrap;
  position:relative;
  overflow:hidden;
}

.nav-btn::before{
  content:'';
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:linear-gradient(135deg,var(--primary-purple),var(--accent-cyan));
  opacity:0;
  transition:opacity 0.3s ease;
  z-index:-1;
}

.nav-btn:hover{
  transform:translateY(-2px);
  box-shadow:0 5px 15px rgba(90,40,255,0.5);
  border-color:var(--primary-purple);
}

.nav-btn:hover::before{
  opacity:0.2;
}

.logout-btn{
  background:rgba(239,68,68,0.2);
  border-color:var(--red);
}

.logout-btn:hover{
  background:rgba(239,68,68,0.3);
  box-shadow:0 5px 15px rgba(239,68,68,0.5);
}

.logout-btn::before{
  background:var(--red);
}

.nav-icon{
  width:16px;
  height:16px;
}

.user-profile{
  display:flex;
  align-items:center;
  gap:8px;
  padding:6px 12px;
  background:rgba(0,0,0,0.5);
  border:1px solid rgba(90,40,255,0.4);
  border-radius:10px;
  transition:all 0.3s ease;
}

.user-profile:hover{
  background:rgba(0,0,0,0.7);
  border-color:var(--primary-purple);
  box-shadow:0 0 15px rgba(90,40,255,0.3);
}

.user-avatar{
  width:35px;
  height:35px;
  border-radius:50%;
  border:2px solid var(--primary-purple);
  object-fit:cover;
  box-shadow:0 0 10px rgba(90,40,255,0.4);
}

.user-info{
  display:flex;
  align-items:center;
  gap:6px;
}

.user-name{
  color:#fff;
  font-size:0.9rem;
  font-weight:600;
  white-space:nowrap;
}

.verified-icon{
  width:16px;
  height:16px;
  filter:drop-shadow(0 0 5px rgba(29,155,240,0.5));
}

.main-content{
  flex:1;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:30px 20px;
}

.countdown-wrapper{
  width:100%;
  max-width:450px;
  text-align:center;
}

.countdown-container{
  background:rgba(0,0,0,0.7);
  border-radius:18px;
  padding:20px 25px;
  border:2px solid var(--primary-purple);
  backdrop-filter:blur(15px);
  animation:glow 2s ease-in-out infinite;
}

.countdown-title{
  color:var(--accent-cyan);
  font-size:1.2rem;
  font-weight:700;
  margin-bottom:15px;
  text-shadow:0 0 12px var(--accent-cyan);
}

.countdown-display{
  display:flex;
  gap:15px;
  justify-content:center;
  flex-wrap:wrap;
}

.time-unit{
  display:flex;
  flex-direction:column;
  align-items:center;
  min-width:70px;
  background:rgba(90,40,255,0.15);
  padding:10px 8px;
  border-radius:12px;
  border:1px solid rgba(90,40,255,0.3);
}

.time-value{
  font-size:1.8rem;
  font-weight:800;
  background:linear-gradient(135deg,var(--primary-purple),var(--accent-cyan));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  animation:numberPulse 1s ease-in-out infinite;
  line-height:1;
}

.time-label{
  color:rgba(255,255,255,0.7);
  font-size:0.85rem;
  margin-top:8px;
  font-weight:600;
}

.countdown-ended{
  font-size:1.8rem;
  color:var(--highlight);
  font-weight:700;
  text-shadow:0 0 20px var(--highlight);
}

@media(max-width:768px){
  .top-navbar{
    padding:10px 12px;
    gap:8px;
    flex-wrap:nowrap;
  }
  
  .nav-section{
    gap:6px;
  }
  
  .nav-section.left{
    order:1;
  }
  
  .nav-section.center{
    order:2;
  }
  
  .nav-section.right{
    order:3;
  }
  
  .nav-btn{
    padding:8px 10px;
    font-size:0.75rem;
  }
  
  .nav-btn span{
    display:none;
  }
  
  .nav-icon{
    width:18px;
    height:18px;
    margin:0;
  }
  
  .logo-text{
    font-size:1.1rem;
    letter-spacing:2px;
  }
  
  .main-content{
    padding:15px 10px;
    align-items:flex-start;
    padding-top:80px;
  }
  
  .countdown-wrapper{
    max-width:350px;
  }
  
  .countdown-container{
    padding:15px 12px;
  }
  
  .countdown-title{
    font-size:0.95rem;
    margin-bottom:12px;
  }
  
  .countdown-display{
    gap:8px;
  }
  
  .time-unit{
    min-width:55px;
    padding:8px 5px;
  }
  
  .time-value{
    font-size:1.3rem;
  }
  
  .time-label{
    font-size:0.7rem;
    margin-top:5px;
  }
  
  .user-profile{
    padding:4px 8px;
    gap:6px;
  }
  
  .user-avatar{
    width:28px;
    height:28px;
  }
  
  .user-name{
    font-size:0.8rem;
  }
  
  .verified-icon{
    width:14px;
    height:14px;
  }
}

@media(max-width:480px){
  .main-content{
    padding-top:70px;
  }
  
  .countdown-wrapper{
    max-width:320px;
  }
  
  .countdown-title{
    font-size:0.85rem;
  }
  
  .time-unit{
    min-width:48px;
    padding:7px 4px;
  }
  
  .time-value{
    font-size:1.1rem;
  }
  
  .time-label{
    font-size:0.65rem;
  }
  
  .countdown-display{
    gap:6px;
  }
  
  .user-avatar{
    width:26px;
    height:26px;
  }
  
  .user-name{
    font-size:0.75rem;
  }
  
  .verified-icon{
    width:12px;
    height:12px;
  }
}
</style>
</head>

<body>
<div class="circle-decoration circle-1"></div>
<div class="circle-decoration circle-2"></div>
<div class="circle-decoration circle-3"></div>

<div class="auth-warning" id="authWarning">
  <h2>يجب عليك تسجيل الدخول أولاً!</h2>
  <p>سيتم إعادة توجيهك لصفحة تسجيل الدخول...</p>
</div>

<div class="container" id="mainContainer">
  <nav class="top-navbar">
    <div class="nav-section left">
      <button class="nav-btn logout-btn" id="logoutBtn">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
          <polyline points="16 17 21 12 16 7"></polyline>
          <line x1="21" y1="12" x2="9" y2="12"></line>
        </svg>
        <span>خروج</span>
      </button>
      <a href="requests.html" class="nav-btn">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
        </svg>
        <span>الطلبات</span>
      </a>
      <a href="invite.html" class="nav-btn">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
          <circle cx="9" cy="7" r="4"></circle>
          <line x1="19" y1="8" x2="19" y2="14"></line>
          <line x1="22" y1="11" x2="16" y2="11"></line>
        </svg>
        <span>الإحالة</span>
      </a>
    </div>

    <div class="nav-section center">
      <div class="logo-text">VOID</div>
    </div>

    <div class="nav-section right">
      <div class="user-profile" id="userProfile" style="display:none;">
        <img id="userAvatar" class="user-avatar" src="" alt="User">
        <div class="user-info">
          <span class="user-name" id="userName"></span>
          <img id="verifiedIcon" class="verified-icon" src="verified.png" alt="Verified" style="display:none;">
        </div>
      </div>
      <a href="rank.html" class="nav-btn">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
          <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
          <path d="M4 22h16"></path>
          <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
          <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
          <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
        </svg>
        <span>المتصدرين</span>
      </a>
      <a href="tickets.html" class="nav-btn">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"></path>
          <path d="M13 5v2"></path>
          <path d="M13 17v2"></path>
          <path d="M13 11v2"></path>
        </svg>
        <span>التذاكر</span>
      </a>
    </div>
  </nav>

  <div class="main-content">
    <div class="countdown-wrapper">
      <div class="countdown-container">
        <div class="countdown-title">العد التنازلي للحدث</div>
        <div class="countdown-display" id="countdown">
          <div class="time-unit">
            <div class="time-value" id="days">00</div>
            <div class="time-label">يوم</div>
          </div>
          <div class="time-unit">
            <div class="time-value" id="hours">00</div>
            <div class="time-label">ساعة</div>
          </div>
          <div class="time-unit">
            <div class="time-value" id="minutes">00</div>
            <div class="time-label">دقيقة</div>
          </div>
          <div class="time-unit">
            <div class="time-value" id="seconds">00</div>
            <div class="time-label">ثانية</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script type="module">
import { auth, signOut } from './void.js';
import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";

const authWarning = document.getElementById('authWarning');
const mainContainer = document.getElementById('mainContainer');
const logoutBtn = document.getElementById('logoutBtn');
const userProfile = document.getElementById('userProfile');
const userAvatar = document.getElementById('userAvatar');
const userName = document.getElementById('userName');
const verifiedIcon = document.getElementById('verifiedIcon');

const remembered = localStorage.getItem('remembered') === 'true';
const isGuest = localStorage.getItem('guest') === 'true';
const userId = localStorage.getItem('userId');

if (!remembered && !isGuest && !userId) {
  authWarning.classList.add('show');
  setTimeout(() => {
    window.location.href = 'index.html';
  }, 2000);
} else {
  mainContainer.classList.add('show');
  
  if (userId && !isGuest) {
    const db = getDatabase();
    const userRef = ref(db, `users/${userId}`);
    
    get(userRef).then((snapshot) => {
      if (snapshot.exists()) {
        const userData = snapshot.val();
        
        if (userData.profile) {
          userAvatar.src = userData.profile;
          userProfile.style.display = 'flex';
        }
        
        if (userData.user) {
          userName.textContent = userData.user;
        }
        
        if (userData.verified === true) {
          verifiedIcon.style.display = 'block';
        }
      }
    }).catch((error) => {
      console.error('خطأ في جلب بيانات المستخدم:', error);
    });
  }
  
  const eventTime = new Date("2025-12-19T13:00:00Z").getTime();
  
  const countdownInterval = setInterval(() => {
    const now = new Date().getTime();
    const distance = eventTime - now;
    
    if (distance < 0) {
      clearInterval(countdownInterval);
      document.getElementById('countdown').innerHTML = '<div class="countdown-ended">انتهى الحدث!</div>';
      return;
    }
    
    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((distance % (1000 * 60)) / 1000);
    
    document.getElementById('days').textContent = String(days).padStart(2, '0');
    document.getElementById('hours').textContent = String(hours).padStart(2, '0');
    document.getElementById('minutes').textContent = String(minutes).padStart(2, '0');
    document.getElementById('seconds').textContent = String(seconds).padStart(2, '0');
  }, 1000);
}

logoutBtn.addEventListener('click', async () => {
  try {
    if (!isGuest) {
      await signOut(auth);
    }
    localStorage.removeItem('remembered');
    localStorage.removeItem('guest');
    localStorage.removeItem('userId');
    window.location.href = 'index.html';
  } catch (error) {
    window.location.href = 'index.html';
  }
});
</script>

</body>
</html>