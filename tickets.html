<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<link rel="icon" href="anas.png" />
<title>Ø´Ø±Ø§Ø¡ Ø§Ù„ØªØ°Ø§ÙƒØ± - VOID</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
:root{
  --primary-purple:#5a28ff;
  --secondary-purple:#7b4dff;
  --accent-cyan:#22d3ee;
  --accent-gold:#fbbf24;
  --bg-dark:#081c39;
  --bg-darker:#0a0d14;
  --highlight:#6fffa3;
}

*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;overflow-x:hidden}

@keyframes gradientShift{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

@keyframes float{
  0%,100%{transform:translateY(0) rotate(0deg)}
  50%{transform:translateY(-20px) rotate(5deg)}
}

@keyframes pulse{
  0%,100%{transform:scale(1);opacity:0.3}
  50%{transform:scale(1.1);opacity:0.6}
}

@keyframes fadeInUp{
  from{opacity:0;transform:translateY(30px)}
  to{opacity:1;transform:translateY(0)}
}

@keyframes shine{
  0%{background-position:-200% center}
  100%{background-position:200% center}
}

@keyframes bounce{
  0%,100%{transform:translateY(0)}
  50%{transform:translateY(-10px)}
}

@keyframes glow{
  0%,100%{box-shadow:0 0 20px rgba(90,40,255,0.5)}
  50%{box-shadow:0 0 40px rgba(34,211,238,0.8),0 0 60px rgba(90,40,255,0.6)}
}

@keyframes slideIn{
  from{transform:translateX(100%);opacity:0}
  to{transform:translateX(0);opacity:1}
}

@keyframes scaleIn{
  from{transform:scale(0.8);opacity:0}
  to{transform:scale(1);opacity:1}
}

@keyframes slideIn{
  from{opacity:0;transform:translateX(100px)}
  to{opacity:1;transform:translateX(0)}
}

@keyframes slideOut{
  from{opacity:1;transform:translateX(0)}
  to{opacity:0;transform:translateX(100px)}
}

@keyframes strikethrough{
  0%{width:0}
  100%{width:100%}
}

@keyframes priceScale{
  0%{transform:scale(1)}
  50%{transform:scale(1.1)}
  100%{transform:scale(1)}
}

body{
  font-family:'Cairo',sans-serif;
  background:linear-gradient(135deg,#081c39 0%,#0a0d14 100%);
  background-size:400% 400%;
  animation:gradientShift 15s ease infinite;
  position:relative;
  overflow-y:auto;
  padding:20px 10px;
  min-height:100vh;
}

body::before,body::after{
  content:'';
  position:fixed;
  border-radius:50%;
  filter:blur(100px);
  opacity:0.15;
  animation:float 8s ease-in-out infinite;
  pointer-events:none;
}

body::before{
  width:400px;
  height:400px;
  background:radial-gradient(circle,#3b82f6,transparent);
  top:-150px;
  right:-150px;
}

body::after{
  width:350px;
  height:350px;
  background:radial-gradient(circle,var(--accent-cyan),transparent);
  bottom:-100px;
  left:-100px;
  animation-delay:4s;
}

.toast-container{
  position:fixed;
  top:20px;
  left:20px;
  z-index:10000;
  display:flex;
  flex-direction:column;
  gap:10px;
  max-width:400px;
}

.toast{
  background:rgba(0,0,0,0.95);
  border-radius:16px;
  padding:18px 22px;
  display:flex;
  align-items:center;
  gap:14px;
  backdrop-filter:blur(25px);
  border:1px solid rgba(255,255,255,0.15);
  animation:slideIn 0.4s cubic-bezier(0.4,0,0.2,1);
  box-shadow:0 15px 50px rgba(0,0,0,0.6),0 0 1px rgba(255,255,255,0.1);
  position:relative;
  overflow:hidden;
}

.toast.hide{
  animation:slideOut 0.3s ease-in forwards;
}

.toast-icon{
  width:44px;
  height:44px;
  border-radius:12px;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-shrink:0;
  box-shadow:0 4px 12px rgba(0,0,0,0.3);
}

.toast-icon svg{
  width:24px;
  height:24px;
  stroke:white;
  stroke-width:2.5;
}

.toast.success .toast-icon{
  background:linear-gradient(135deg,#10b981,#059669);
}

.toast.error .toast-icon{
  background:linear-gradient(135deg,#ef4444,#dc2626);
}

.toast.warning .toast-icon{
  background:linear-gradient(135deg,#f59e0b,#d97706);
}

.toast.info .toast-icon{
  background:linear-gradient(135deg,#3b82f6,#2563eb);
}

.toast-content{
  flex:1;
}

.toast-title{
  color:#fff;
  font-weight:700;
  font-size:1rem;
  margin-bottom:3px;
}

.toast-message{
  color:rgba(255,255,255,0.8);
  font-size:0.88rem;
  line-height:1.5;
}

.toast-close{
  background:rgba(255,255,255,0.1);
  border:none;
  color:rgba(255,255,255,0.7);
  cursor:pointer;
  padding:6px;
  border-radius:8px;
  transition:all 0.2s;
  width:28px;
  height:28px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:14px;
}

.toast-close:hover{
  background:rgba(255,255,255,0.2);
  color:#fff;
}

.toast-progress{
  position:absolute;
  bottom:0;
  left:0;
  height:3px;
  border-radius:0 0 16px 16px;
  animation:progress 5s linear forwards;
}

.toast.success .toast-progress{
  background:linear-gradient(90deg,#10b981,#34d399);
}

.toast.error .toast-progress{
  background:linear-gradient(90deg,#ef4444,#f87171);
}

.toast.warning .toast-progress{
  background:linear-gradient(90deg,#f59e0b,#fbbf24);
}

.toast.info .toast-progress{
  background:linear-gradient(90deg,#3b82f6,#60a5fa);
}

@keyframes progress{
  from{width:100%}
  to{width:0%}
}

.circle-decoration{
  position:fixed;
  border-radius:50%;
  border:2px solid rgba(90,40,255,0.2);
  animation:pulse 4s ease-in-out infinite;
  pointer-events:none;
  z-index:1;
}

.circle-1{width:250px;height:250px;top:10%;left:5%}
.circle-2{width:180px;height:180px;bottom:15%;right:10%;animation-delay:2s}
.circle-3{width:220px;height:220px;top:50%;right:5%;animation-delay:3s}

.back-btn{
  position:fixed;
  top:20px;
  right:20px;
  background:rgba(0,0,0,0.65);
  border:1px solid rgba(90,40,255,0.3);
  border-radius:12px;
  padding:12px 24px;
  color:#fff;
  text-decoration:none;
  display:flex;
  align-items:center;
  gap:8px;
  backdrop-filter:blur(10px);
  transition:all 0.3s;
  z-index:200;
  animation:fadeInUp 0.6s ease-out;
}

.back-btn:hover{
  background:var(--primary-purple);
  transform:scale(1.05);
  box-shadow:0 0 30px rgba(90,40,255,0.5);
}

.container{
  max-width:1200px;
  margin:80px auto 40px;
  position:relative;
  z-index:10;
}

.header{
  text-align:center;
  margin-bottom:50px;
  animation:fadeInUp 0.6s ease-out;
}

.icon-circle{
  width:100px;
  height:100px;
  margin:0 auto 25px;
  border-radius:50%;
  background:linear-gradient(135deg,#3b82f6,var(--accent-cyan));
  display:flex;
  align-items:center;
  justify-content:center;
  animation:bounce 2s ease-in-out infinite,glow 3s ease-in-out infinite;
  box-shadow:0 10px 40px rgba(59,130,246,0.4);
}

.icon{
  width:50px;
  height:50px;
  stroke:white;
  fill:none;
  stroke-width:2;
}

.page-title{
  font-size:3rem;
  font-weight:800;
  background:linear-gradient(135deg,#3b82f6,var(--accent-cyan));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  margin-bottom:12px;
}

.page-subtitle{
  color:rgba(255,255,255,0.7);
  font-size:1.1rem;
}

.tickets-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(300px,1fr));
  gap:30px;
  margin-bottom:40px;
  animation:fadeInUp 0.8s ease-out;
}

.ticket-card{
  position:relative;
  background:rgba(0,0,0,0.7);
  border-radius:24px;
  padding:30px;
  border:2px solid rgba(90,40,255,0.3);
  backdrop-filter:blur(15px);
  transition:all 0.4s cubic-bezier(0.4,0,0.2,1);
  animation:scaleIn 0.6s ease-out backwards;
  overflow:hidden;
  cursor:pointer;
}

.ticket-card:nth-child(1){
  animation-delay:0.1s;
  border-color:rgba(34,211,238,0.4);
}

.ticket-card:nth-child(2){
  animation-delay:0.2s;
  border-color:rgba(90,40,255,0.4);
}

.ticket-card:nth-child(3){
  animation-delay:0.3s;
  border-color:rgba(251,191,36,0.4);
}

.ticket-card::before{
  content:'';
  position:absolute;
  top:-2px;
  left:-2px;
  right:-2px;
  bottom:-2px;
  border-radius:24px;
  z-index:-1;
  opacity:0;
  transition:opacity 0.5s;
}

.ticket-card:nth-child(1)::before{
  background:linear-gradient(45deg,#22d3ee,#06b6d4,#0891b2);
}

.ticket-card:nth-child(2)::before{
  background:linear-gradient(45deg,#5a28ff,#7b4dff,#9333ea);
}

.ticket-card:nth-child(3)::before{
  background:linear-gradient(45deg,#fbbf24,#f59e0b,#d97706);
}

.ticket-card:hover{
  transform:translateY(-10px) scale(1.02);
}

.ticket-card:hover::before{
  opacity:0.6;
}

.ticket-card:nth-child(1):hover{
  box-shadow:0 20px 60px rgba(34,211,238,0.5);
}

.ticket-card:nth-child(2):hover{
  box-shadow:0 20px 60px rgba(90,40,255,0.5);
}

.ticket-card:nth-child(3):hover{
  box-shadow:0 20px 60px rgba(251,191,36,0.5);
  animation:glow 1.5s ease-in-out infinite;
}

.ticket-badge{
  position:absolute;
  top:15px;
  left:15px;
  background:rgba(255,255,255,0.15);
  backdrop-filter:blur(10px);
  padding:6px 14px;
  border-radius:20px;
  font-size:0.75rem;
  font-weight:700;
  color:#fff;
  text-transform:uppercase;
  letter-spacing:0.5px;
}

.ticket-icon-wrap{
  width:70px;
  height:70px;
  margin:20px auto;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  transition:transform 0.3s;
}

.ticket-card:hover .ticket-icon-wrap{
  transform:rotate(15deg) scale(1.1);
}

.ticket-card:nth-child(1) .ticket-icon-wrap{
  background:linear-gradient(135deg,#22d3ee,#06b6d4);
}

.ticket-card:nth-child(2) .ticket-icon-wrap{
  background:linear-gradient(135deg,#5a28ff,#7b4dff);
}

.ticket-card:nth-child(3) .ticket-icon-wrap{
  background:linear-gradient(135deg,#fbbf24,#f59e0b);
}

.ticket-icon-wrap svg{
  width:35px;
  height:35px;
  stroke:white;
  fill:none;
  stroke-width:2.5;
}

.ticket-title{
  font-size:1.8rem;
  font-weight:800;
  color:#fff;
  text-align:center;
  margin-bottom:15px;
}

.ticket-price{
  font-size:2.5rem;
  font-weight:800;
  text-align:center;
  margin-bottom:10px;
}

.ticket-card:nth-child(1) .ticket-price{
  background:linear-gradient(135deg,#22d3ee,#06b6d4);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

.ticket-card:nth-child(2) .ticket-price{
  background:linear-gradient(135deg,#5a28ff,#7b4dff);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

.ticket-card:nth-child(3) .ticket-price{
  background:linear-gradient(135deg,#fbbf24,#f59e0b);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

.ticket-description{
  color:rgba(255,255,255,0.75);
  font-size:0.95rem;
  line-height:1.6;
  text-align:center;
  margin-bottom:15px;
  min-height:80px;
}

.ticket-voting-info{
  background:rgba(111,255,163,0.12);
  border:1px solid rgba(111,255,163,0.25);
  border-radius:10px;
  padding:10px 15px;
  margin:12px 0;
  text-align:center;
  font-size:0.92rem;
  line-height:1.5;
  color:rgba(255,255,255,0.9);
  font-weight:600;
}

.ticket-voting-info.vip{
  background:rgba(251,191,36,0.12);
  border-color:rgba(251,191,36,0.3);
}

.ticket-voting-info .highlight-number{
  color:#fbbf24;
  font-weight:800;
  font-size:1.1em;
  text-shadow:0 0 10px rgba(251,191,36,0.5);
}

.ticket-limit{
  text-align:center;
  color:rgba(255,255,255,0.6);
  font-size:0.85rem;
  margin-bottom:20px;
}

.select-btn{
  display:block;
  width:100%;
  padding:14px;
  border-radius:12px;
  border:none;
  font-size:1.1rem;
  font-weight:700;
  color:#fff;
  cursor:pointer;
  transition:all 0.3s;
  position:relative;
  overflow:hidden;
}

.select-btn::before{
  content:'';
  position:absolute;
  top:0;
  left:-100%;
  width:100%;
  height:100%;
  background:linear-gradient(90deg,transparent,rgba(255,255,255,0.2),transparent);
  transition:left 0.5s;
}

.select-btn:hover::before{
  left:100%;
}

.ticket-card:nth-child(1) .select-btn{
  background:linear-gradient(135deg,#22d3ee,#06b6d4);
}

.ticket-card:nth-child(2) .select-btn{
  background:linear-gradient(135deg,#5a28ff,#7b4dff);
}

.ticket-card:nth-child(3) .select-btn{
  background:linear-gradient(135deg,#fbbf24,#f59e0b);
}

.select-btn:hover{
  transform:scale(1.05);
}

.modal{
  display:none;
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.85);
  backdrop-filter:blur(10px);
  z-index:1000;
  align-items:center;
  justify-content:center;
  padding:20px;
  animation:fadeInUp 0.3s ease-out;
}

.modal.active{
  display:flex;
}

.modal-content{
  background:rgba(10,13,20,0.95);
  border:2px solid rgba(90,40,255,0.4);
  border-radius:24px;
  padding:40px;
  max-width:600px;
  width:100%;
  max-height:90vh;
  overflow-y:auto;
  position:relative;
  animation:slideIn 0.4s ease-out;
  backdrop-filter:blur(20px);
}

.modal-content::-webkit-scrollbar{
  width:8px;
}

.modal-content::-webkit-scrollbar-track{
  background:rgba(255,255,255,0.05);
  border-radius:10px;
}

.modal-content::-webkit-scrollbar-thumb{
  background:linear-gradient(135deg,#5a28ff,#22d3ee);
  border-radius:10px;
}

.close-modal{
  position:absolute;
  top:20px;
  left:20px;
  background:rgba(255,255,255,0.1);
  border:none;
  width:40px;
  height:40px;
  border-radius:50%;
  cursor:pointer;
  transition:all 0.3s;
  display:flex;
  align-items:center;
  justify-content:center;
}

.close-modal:hover{
  background:rgba(239,68,68,0.3);
  transform:rotate(90deg);
}

.close-modal svg{
  width:20px;
  height:20px;
  stroke:#fff;
  stroke-width:3;
}

.modal-header{
  text-align:center;
  margin-bottom:30px;
}

.modal-title{
  font-size:2rem;
  font-weight:800;
  color:#fff;
  margin-bottom:10px;
}

.modal-price{
  font-size:2.5rem;
  font-weight:800;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:12px;
}

#originalPrice{
  font-size:1.8rem;
  color:#ef4444;
  position:relative;
  display:none;
}

#originalPrice.active{
  display:inline;
  animation:fadeInUp 0.4s ease-out;
}

#originalPrice::after{
  content:'';
  position:absolute;
  left:-5%;
  top:50%;
  height:3px;
  background:#ef4444;
  transform:translateY(-50%) rotate(-15deg);
  width:0;
}

#originalPrice.active::after{
  animation:strikethrough 0.6s ease-out forwards;
  animation-delay:0.2s;
}

#finalPrice{
  background:linear-gradient(135deg,#5a28ff,#22d3ee);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  transition:all 0.3s ease;
}

#finalPrice.discounted{
  background:linear-gradient(135deg,#10b981,#059669);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  animation:priceScale 0.5s ease-out;
}

.form-section{
  margin-bottom:25px;
}

.section-title{
  font-size:1.3rem;
  font-weight:700;
  color:#fff;
  margin-bottom:15px;
  display:flex;
  align-items:center;
  gap:10px;
}

.section-title svg{
  width:24px;
  height:24px;
  stroke:var(--accent-cyan);
}

.payment-methods{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:15px;
  margin-bottom:20px;
}

.payment-method{
  padding:20px;
  border:2px solid rgba(90,40,255,0.3);
  border-radius:16px;
  background:rgba(0,0,0,0.5);
  cursor:pointer;
  transition:all 0.3s;
  text-align:center;
}

.payment-method:hover{
  border-color:var(--accent-cyan);
  transform:translateY(-3px);
}

.payment-method.active{
  border-color:var(--accent-cyan);
  background:rgba(34,211,238,0.15);
  box-shadow:0 0 30px rgba(34,211,238,0.3);
}

.payment-method input[type="radio"]{
  display:none;
}

.payment-icon{
  font-size:2rem;
  margin-bottom:10px;
}

.payment-label{
  font-weight:700;
  color:#fff;
  font-size:1rem;
  margin-bottom:5px;
}

.payment-desc{
  font-size:0.8rem;
  color:rgba(255,255,255,0.6);
}

.zain-info{
  background:rgba(34,211,238,0.1);
  border:1px solid rgba(34,211,238,0.3);
  border-radius:12px;
  padding:15px;
  margin-top:15px;
  display:none;
}

.zain-info.active{
  display:block;
  animation:fadeInUp 0.3s ease-out;
}

.zain-number{
  font-size:1.5rem;
  font-weight:800;
  color:var(--accent-cyan);
  text-align:center;
  margin-bottom:10px;
  direction:ltr;
}

.zain-note{
  color:rgba(255,255,255,0.7);
  font-size:0.9rem;
  text-align:center;
}

.arrival-info{
  background:rgba(34,211,238,0.1);
  border:1px solid rgba(34,211,238,0.3);
  border-radius:12px;
  padding:15px;
  margin-top:15px;
  display:none;
}

.arrival-info.active{
  display:block;
  animation:fadeInUp 0.3s ease-out;
}

.arrival-text{
  color:rgba(255,255,255,0.85);
  font-size:0.95rem;
  text-align:center;
  line-height:1.6;
}

.arrival-link{
  color:#3b82f6;
  text-decoration:none;
  font-weight:700;
  transition:all 0.3s;
}

.arrival-link:hover{
  color:var(--accent-cyan);
  text-decoration:underline;
}

.form-group{
  margin-bottom:20px;
}

.form-label{
  display:block;
  color:#fff;
  font-weight:600;
  margin-bottom:8px;
  font-size:0.95rem;
}

.form-input{
  width:100%;
  padding:12px 15px;
  border:2px solid rgba(90,40,255,0.3);
  border-radius:12px;
  background:rgba(0,0,0,0.5);
  color:#fff;
  font-size:1rem;
  font-family:'Cairo',sans-serif;
  transition:all 0.3s;
}

.form-input:focus{
  outline:none;
  border-color:var(--accent-cyan);
  box-shadow:0 0 20px rgba(34,211,238,0.3);
}

.form-input::placeholder{
  color:rgba(255,255,255,0.4);
}

.file-upload{
  position:relative;
  display:block;
  width:100%;
  padding:30px;
  border:2px dashed rgba(90,40,255,0.4);
  border-radius:12px;
  background:rgba(0,0,0,0.3);
  text-align:center;
  cursor:pointer;
  transition:all 0.3s;
}

.file-upload:hover{
  border-color:var(--accent-cyan);
  background:rgba(34,211,238,0.05);
}

.file-upload input{
  position:absolute;
  opacity:0;
  width:100%;
  height:100%;
  top:0;
  left:0;
  cursor:pointer;
}

.file-upload-text{
  color:rgba(255,255,255,0.7);
  font-size:0.95rem;
}

.file-preview{
  margin-top:10px;
  display:none;
}

.file-preview.active{
  display:block;
}

.file-preview img{
  max-width:100%;
  border-radius:12px;
  border:2px solid rgba(34,211,238,0.4);
}

.tax-info{
  background:rgba(251,191,36,0.1);
  border:1px solid rgba(251,191,36,0.3);
  border-radius:12px;
  padding:12px;
  margin-top:15px;
  display:none;
}

.tax-info.active{
  display:block;
  animation:fadeInUp 0.3s ease-out;
}

.tax-text{
  color:var(--accent-gold);
  font-size:0.9rem;
  text-align:center;
  font-weight:600;
}

.submit-btn{
  width:100%;
  padding:16px;
  border:none;
  border-radius:12px;
  background:linear-gradient(135deg,#5a28ff,#22d3ee);
  color:#fff;
  font-size:1.2rem;
  font-weight:700;
  cursor:pointer;
  transition:all 0.3s;
  position:relative;
  overflow:hidden;
}

.submit-btn::before{
  content:'';
  position:absolute;
  top:0;
  left:-100%;
  width:100%;
  height:100%;
  background:linear-gradient(90deg,transparent,rgba(255,255,255,0.3),transparent);
  transition:left 0.5s;
}

.submit-btn:hover{
  transform:scale(1.03);
  box-shadow:0 10px 40px rgba(90,40,255,0.6);
}

.submit-btn:hover::before{
  left:100%;
}

.submit-btn:disabled{
  opacity:0.5;
  cursor:not-allowed;
}

.discount-section{
  margin-top:20px;
  padding-top:20px;
  border-top:1px solid rgba(255,255,255,0.1);
}

.discount-input-group{
  display:flex;
  gap:10px;
}

.discount-input{
  flex:1;
}

.apply-discount-btn{
  padding:12px 24px;
  border:none;
  border-radius:12px;
  background:linear-gradient(135deg,#10b981,#059669);
  color:#fff;
  font-weight:700;
  cursor:pointer;
  transition:all 0.3s;
}

.apply-discount-btn:hover{
  transform:scale(1.05);
  box-shadow:0 5px 20px rgba(16,185,129,0.4);
}

.discount-message{
  margin-top:10px;
  padding:10px;
  border-radius:8px;
  text-align:center;
  font-weight:600;
  display:none;
}

.discount-message.success{
  background:rgba(16,185,129,0.2);
  border:1px solid rgba(16,185,129,0.4);
  color:#10b981;
  display:block;
}

.discount-message.error{
  background:rgba(239,68,68,0.2);
  border:1px solid rgba(239,68,68,0.4);
  color:#f87171;
  display:block;
}

.price-summary{
  background:rgba(0,0,0,0.5);
  border:1px solid rgba(90,40,255,0.3);
  border-radius:12px;
  padding:15px;
  margin-top:20px;
}

.price-row{
  display:flex;
  justify-content:space-between;
  margin-bottom:10px;
  color:rgba(255,255,255,0.8);
}

.price-row.total{
  font-size:1.3rem;
  font-weight:800;
  color:#fff;
  padding-top:10px;
  border-top:1px solid rgba(255,255,255,0.2);
}

#basePrice{
  position:relative;
  transition:all 0.3s ease;
}

#basePrice.striked{
  color:#ef4444;
  animation:fadeInUp 0.4s ease-out;
}

#basePrice.striked::after{
  content:'';
  position:absolute;
  left:-5%;
  top:50%;
  height:2px;
  background:#ef4444;
  transform:translateY(-50%) rotate(-15deg);
  width:0;
  animation:strikethrough 0.6s ease-out forwards;
  animation-delay:0.2s;
}

#discountAmount{
  color:#10b981;
  font-weight:700;
  animation:priceScale 0.5s ease-out;
}

.price-row.total span:last-child{
  background:linear-gradient(135deg,#10b981,#059669);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  transition:all 0.3s ease;
}

.price-row.total.discounted-total span:last-child{
  animation:priceScale 0.5s ease-out;
}

.success-message{
  display:none;
  text-align:center;
  padding:30px;
}

.success-message.active{
  display:block;
  animation:scaleIn 0.5s ease-out;
}

.success-icon{
  width:80px;
  height:80px;
  margin:0 auto 20px;
  border-radius:50%;
  background:linear-gradient(135deg,#10b981,#059669);
  display:flex;
  align-items:center;
  justify-content:center;
  animation:bounce 1s ease-in-out;
}

.success-icon svg{
  width:40px;
  height:40px;
  stroke:#fff;
  stroke-width:3;
}

.success-title{
  font-size:2rem;
  font-weight:800;
  color:#fff;
  margin-bottom:15px;
}

.success-text{
  color:rgba(255,255,255,0.8);
  font-size:1.1rem;
  line-height:1.6;
}

@media(max-width:768px){
  .back-btn{
    top:10px;
    right:10px;
    padding:10px 18px;
    font-size:0.9rem;
  }
  
  .container{
    margin-top:70px;
  }
  
  .page-title{
    font-size:2rem;
  }
  
  .page-subtitle{
    font-size:1rem;
  }
  
  .tickets-grid{
    grid-template-columns:1fr;
    gap:20px;
  }
  
  .ticket-card{
    padding:25px;
  }
  
  .ticket-title{
    font-size:1.5rem;
  }
  
  .ticket-price{
    font-size:2rem;
  }
  
  .modal-content{
    padding:25px;
  }
  
  .modal-title{
    font-size:1.5rem;
  }
  
  .modal-price{
    font-size:2rem;
  }
  
  .payment-methods{
    grid-template-columns:1fr;
  }
  
  .discount-input-group{
    flex-direction:column;
  }
}

@media(max-width:480px){
  body{
    padding:15px 8px;
  }
  
  .page-title{
    font-size:1.7rem;
  }
  
  .ticket-title{
    font-size:1.3rem;
  }
  
  .ticket-price{
    font-size:1.8rem;
  }
  
  .modal-content{
    padding:20px;
    max-height:85vh;
  }
  
  .modal-price{
    font-size:1.8rem;
    flex-direction:column;
    gap:8px;
  }
  
  #originalPrice{
    font-size:1.4rem;
  }
  
  .section-title{
    font-size:1.1rem;
  }
  
  .form-input, .form-label{
    font-size:0.9rem;
  }
  
  .discount-input-group{
    gap:8px;
  }
  
  .apply-discount-btn{
    padding:12px 16px;
    font-size:0.9rem;
  }
}
</style>
</head>

<body>
<div class="toast-container" id="toastContainer"></div>

<div class="circle-decoration circle-1"></div>
<div class="circle-decoration circle-2"></div>
<div class="circle-decoration circle-3"></div>

<a href="home.html" class="back-btn">
  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
    <polyline points="9 18 15 12 9 6"></polyline>
  </svg>
  <span>Ø§Ù„Ø¹ÙˆØ¯Ø©</span>
</a>

<div class="container">
  <div class="header">
    <div class="icon-circle">
      <svg class="icon" viewBox="0 0 24 24">
        <path d="M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"></path>
        <path d="M13 5v2"></path>
        <path d="M13 17v2"></path>
        <path d="M13 11v2"></path>
      </svg>
    </div>
    <h1 class="page-title">Ø§Ø­Ø¬Ø² ØªØ°ÙƒØ±ØªÙƒ Ø§Ù„Ø¢Ù†</h1>
    <p class="page-subtitle">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„ØªØ°ÙƒØ±Ø© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ùƒ ÙˆØ§Ø³ØªÙ…ØªØ¹ Ø¨ØªØ¬Ø±Ø¨Ø© ÙØ±ÙŠØ¯Ø©</p>
  </div>

  <div class="tickets-grid">
    <div class="ticket-card" onclick="openModal('basic')">
      <span class="ticket-badge">Ø§Ù„Ø£ÙƒØ«Ø± Ø´Ø¹Ø¨ÙŠØ©</span>
      <div class="ticket-icon-wrap">
        <svg viewBox="0 0 24 24">
          <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
          <circle cx="9" cy="7" r="4"></circle>
          <path d="M22 21v-2a4 4 0 0 0-3-3.87"></path>
          <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
        </svg>
      </div>
      <h2 class="ticket-title">Basic Ticket</h2>
      <div class="ticket-price">10 JOD</div>
      <p class="ticket-description">Ø¯Ø®ÙˆÙ„ Ø¹Ø§Ø¯ÙŠ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§ØªØŒ Ù…Ù†Ø§Ø³Ø¨ Ù„Ù…Ø¹Ø¸Ù… Ø§Ù„Ø­Ø¶ÙˆØ±.</p>
      <div class="ticket-voting-info">
        Ø³ØªØ­ØµÙ„ Ø¹Ù„Ù‰ ØµÙˆØªÙ ÙˆØ§Ø­Ø¯ ÙŠØªÙŠØ­ Ù„Ùƒ Ø§Ù„ØªØµÙˆÙŠØª Ù„Ù…Ø´Ù‡ÙˆØ± Ù…Ù† ÙØ¦Ø© Ø§Ù„Ø°ÙƒÙˆØ± ÙˆØ¢Ø®Ø± Ù…Ù† ÙØ¦Ø© Ø§Ù„Ø¥Ù†Ø§Ø«.
      </div>
      <p class="ticket-limit">Ù…ØªØ¨Ù‚ÙŠ: 400 ØªØ°ÙƒØ±Ø©</p>
      <button class="select-btn">Ø§Ø®ØªØ± Ù‡Ø°Ù‡ Ø§Ù„ØªØ°ÙƒØ±Ø©</button>
    </div>

    <div class="ticket-card" onclick="openModal('squad')">
      <span class="ticket-badge">Ø¹Ø±Ø¶ Ø®Ø§Øµ</span>
      <div class="ticket-icon-wrap">
        <svg viewBox="0 0 24 24">
          <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
          <circle cx="9" cy="7" r="4"></circle>
          <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
          <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
        </svg>
      </div>
      <h2 class="ticket-title">Squad Ticket</h2>
      <div class="ticket-price">30 JOD</div>
      <p class="ticket-description">ØµØ§Ù„Ø­Ø© Ù„Ø«Ù„Ø§Ø«Ø© Ø£Ø´Ø®Ø§ØµØŒ ÙˆØ§Ù„Ø±Ø§Ø¨Ø¹ Ù…Ø¬Ø§Ù†Ø§Ù‹! ØªØ´Ù…Ù„ ØªØ¬Ø±Ø¨Ø© Ù…Ù…ÙŠØ²Ø©ØŒ ÙˆØµÙˆÙ„ Ø³Ø±ÙŠØ¹ØŒ ÙˆÙ…Ù‚Ø§Ø¹Ø¯ Ù…Ø±ÙŠØ­Ø©.</p>
      <div class="ticket-voting-info">
        Ø³ØªØ­ØµÙ„ Ø¹Ù„Ù‰ ØµÙˆØªÙ ÙˆØ§Ø­Ø¯ ÙŠØªÙŠØ­ Ù„Ùƒ Ø§Ù„ØªØµÙˆÙŠØª Ù„Ù…Ø´Ù‡ÙˆØ± Ù…Ù† ÙØ¦Ø© Ø§Ù„Ø°ÙƒÙˆØ± ÙˆØ¢Ø®Ø± Ù…Ù† ÙØ¦Ø© Ø§Ù„Ø¥Ù†Ø§Ø«.
      </div>
      <p class="ticket-limit">Ù…ØªØ¨Ù‚ÙŠ: 300 ØªØ°ÙƒØ±Ø©</p>
      <button class="select-btn">Ø§Ø®ØªØ± Ù‡Ø°Ù‡ Ø§Ù„ØªØ°ÙƒØ±Ø©</button>
    </div>

    <div class="ticket-card" onclick="openModal('vip')">
      <span class="ticket-badge">â­ VIP</span>
      <div class="ticket-icon-wrap">
        <svg viewBox="0 0 24 24">
          <path d="m9 11-6 6v3h9l3-3"></path>
          <path d="m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4"></path>
        </svg>
      </div>
      <h2 class="ticket-title">VIP Ticket</h2>
      <div class="ticket-price">40 JOD</div>
      <p class="ticket-description">Ù…Ø²Ø§ÙŠØ§ Ø¥Ø¶Ø§ÙÙŠØ©: Ù…Ù†Ø§Ø·Ù‚ VIP Ø­ØµØ±ÙŠØ©ØŒ ØªØ¬Ø±Ø¨Ø© Ù…Ù…ÙŠØ²Ø© Ù„Ø§ ØªÙÙ†Ø³Ù‰ØŒ Ø®Ø¯Ù…Ø© Ù…Ù…ØªØ§Ø²Ø©ØŒ Ø£Ø¬ÙˆØ§Ø¡ ÙØ±ÙŠØ¯Ø©ØŒ ÙˆØµÙˆÙ„ Ø£Ø³Ø±Ø¹ ÙˆØ±Ø§Ø­Ø© Ø£ÙƒØ«Ø± Ù„Ù„Ø­Ø¶ÙˆØ±.</p>
      <div class="ticket-voting-info vip">
        Ø³ØªØ­ØµÙ„ Ø¹Ù„Ù‰ <span class="highlight-number">Ø®Ù…Ø³Ø©</span> Ø£ØµÙˆØ§Øª ØªØªÙŠØ­ Ù„Ùƒ Ø§Ù„ØªØµÙˆÙŠØª Ù„Ù…Ø´Ù‡ÙˆØ± Ù…Ù† ÙØ¦Ø© Ø§Ù„Ø°ÙƒÙˆØ± ÙˆØ¢Ø®Ø± Ù…Ù† ÙØ¦Ø© Ø§Ù„Ø¥Ù†Ø§Ø«.
      </div>
      <p class="ticket-limit">Ù…ØªØ¨Ù‚ÙŠ: 200 ØªØ°ÙƒØ±Ø©</p>
      <button class="select-btn">Ø§Ø®ØªØ± Ù‡Ø°Ù‡ Ø§Ù„ØªØ°ÙƒØ±Ø©</button>
    </div>
  </div>
</div>

<div class="modal" id="ticketModal">
  <div class="modal-content">
    <button class="close-modal" onclick="closeModal()">
      <svg viewBox="0 0 24 24" fill="none">
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    </button>

    <div id="formContent">
      <div class="modal-header">
        <h2 class="modal-title" id="modalTitle">Basic Ticket</h2>
        <div class="modal-price" id="modalPrice">
          <span id="originalPrice"></span>
          <span id="finalPrice">10 JOD</span>
        </div>
      </div>

      <form id="ticketForm">
        <div class="form-section">
          <h3 class="section-title">
            <svg viewBox="0 0 24 24" fill="none">
              <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
              <line x1="1" y1="10" x2="23" y2="10"></line>
            </svg>
            Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹
          </h3>
          <div class="payment-methods">
            <label class="payment-method active" id="zaincashMethod">
              <input type="radio" name="payment" value="zaincash" checked onchange="togglePaymentMethod('zaincash')">
              <div class="payment-icon">ğŸ’³</div>
              <div class="payment-label">ZainCash</div>
              <div class="payment-desc">ØªØ­ÙˆÙŠÙ„ ÙÙˆØ±ÙŠ</div>
            </label>
            <label class="payment-method" id="arrivalMethod">
              <input type="radio" name="payment" value="arrival" onchange="togglePaymentMethod('arrival')">
              <div class="payment-icon">ğŸ«</div>
              <div class="payment-label">Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„ÙˆØµÙˆÙ„</div>
              <div class="payment-desc">+ 0.39 Ø¶Ø±ÙŠØ¨Ø©</div>
            </label>
          </div>

          <div class="zain-info active" id="zaincashInfo">
            <div class="zain-number">0796440900</div>
            <p class="zain-note">Ù‚Ù… Ø¨Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø±Ù‚Ù… ÙˆØ£Ø±ÙÙ‚ ØµÙˆØ±Ø© Ø§Ù„Ø¥Ø«Ø¨Ø§Øª</p>
          </div>

          <div class="arrival-info" id="arrivalInfo">
            <p class="arrival-text">Ø¹Ù†Ø¯ ÙˆØµÙˆÙ„Ùƒ ØªØ¯ÙØ¹ Ù„Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠÙ†ØŒ Ø«Ù… ØªØ³ØªÙ„Ù… ØªØ°ÙƒØ±ØªÙƒ ÙÙˆØ±Ù‹Ø§ Ù…Ù† Ù‚Ø³Ù… <a href="/requests.html" class="arrival-link">Ø§Ù„Ø·Ù„Ø¨Ø§Øª</a>.</p>
          </div>

          <div class="tax-info" id="taxInfo">
            <p class="tax-text">Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© 0.39 Ù‚Ø±Ø´ Ø¶Ø±ÙŠØ¨Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</p>
          </div>
        </div>

        <div class="form-section">
          <h3 class="section-title">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
            Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©
          </h3>
          <div class="form-group">
            <label class="form-label">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ *</label>
            <input type="text" class="form-input" name="fullName" id="fullNameInput" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„" required>
          </div>
          <div class="form-group" id="squadMembersSection" style="display:none;">
            <label class="form-label">Ø£Ø³Ù…Ø§Ø¡ Ø£Ø¹Ø¶Ø§Ø¡ Ø§Ù„Ø³ÙƒÙˆØ§Ø¯ (4 Ø£Ø´Ø®Ø§Øµ) *</label>
            <div style="margin-bottom:10px">
              <label class="form-label" style="font-size:0.85rem;color:rgba(255,255,255,0.6);">1- Ø¹Ø¶Ùˆ Ø£ÙˆÙ„ (ÙŠØªØ¹Ø¨Ø£ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹)</label>
              <input type="text" class="form-input" name="member1" id="member1" readonly placeholder="Ø³ÙŠØªÙ… Ø§Ù„ØªØ¹Ø¨Ø¦Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹" style="background:rgba(255,255,255,0.05);cursor:not-allowed;">
            </div>
            <div style="margin-bottom:10px">
              <label class="form-label" style="font-size:0.85rem;color:rgba(255,255,255,0.6);">2- Ø¹Ø¶Ùˆ Ø«Ø§Ù†ÙŠ *</label>
              <input type="text" class="form-input" name="member2" id="member2" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø¹Ø¶Ùˆ Ø§Ù„Ø«Ø§Ù†ÙŠ">
            </div>
            <div style="margin-bottom:10px">
              <label class="form-label" style="font-size:0.85rem;color:rgba(255,255,255,0.6);">3- Ø¹Ø¶Ùˆ Ø«Ø§Ù„Ø« *</label>
              <input type="text" class="form-input" name="member3" id="member3" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø¹Ø¶Ùˆ Ø§Ù„Ø«Ø§Ù„Ø«">
            </div>
            <div style="margin-bottom:10px">
              <label class="form-label" style="font-size:0.85rem;color:rgba(255,255,255,0.6);">4- Ø¹Ø¶Ùˆ Ø±Ø§Ø¨Ø¹ *</label>
              <input type="text" class="form-input" name="member4" id="member4" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø¹Ø¶Ùˆ Ø§Ù„Ø±Ø§Ø¨Ø¹">
            </div>
          </div>
        </div>

        <div class="form-section" id="zaincashFields">
          <h3 class="section-title">
            <svg viewBox="0 0 24 24" fill="none">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              <circle cx="8.5" cy="8.5" r="1.5"></circle>
              <polyline points="21 15 16 10 5 21"></polyline>
            </svg>
            Ø¥Ø«Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹
          </h3>
          <div class="form-group">
            <label class="form-label">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ù…Ø­ÙˆÙ„ Ù…Ù†Ù‡ *</label>
            <input type="tel" class="form-input" name="senderPhone" placeholder="07XXXXXXXX">
          </div>
          <div class="form-group">
            <label class="form-label">ØµÙˆØ±Ø© Ø¥Ø«Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹ *</label>
            <label class="file-upload" id="fileUploadLabel">
              <input type="file" accept="image/*" name="paymentProof" onchange="previewImage(this)">
              <div class="file-upload-text">Ø§Ù†Ù‚Ø± Ù„Ø±ÙØ¹ ØµÙˆØ±Ø© ğŸ“¸</div>
            </label>
            <div class="file-preview" id="filePreview">
              <img id="previewImg" src="" alt="Ù…Ø¹Ø§ÙŠÙ†Ø©">
            </div>
          </div>
        </div>

        <div class="discount-section">
          <h3 class="section-title">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path>
              <line x1="7" y1="7" x2="7.01" y2="7"></line>
            </svg>
            ÙƒÙˆØ¯ Ø§Ù„Ø®ØµÙ… (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
          </h3>
          <div class="discount-input-group">
            <input type="text" class="form-input discount-input" name="discountCode" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„Ø®ØµÙ…">
            <button type="button" class="apply-discount-btn" onclick="applyDiscount()">ØªØ·Ø¨ÙŠÙ‚</button>
          </div>
          <div class="discount-message" id="discountMessage"></div>
        </div>

        <div class="price-summary">
          <div class="price-row">
            <span>Ø³Ø¹Ø± Ø§Ù„ØªØ°ÙƒØ±Ø©:</span>
            <span id="basePrice">10.00 JOD</span>
          </div>
          <div class="price-row" id="taxRow" style="display:none;">
            <span>Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©:</span>
            <span>0.39 JOD</span>
          </div>
          <div class="price-row" id="discountRow" style="display:none;">
            <span>Ø§Ù„Ø®ØµÙ…:</span>
            <span id="discountAmount">0.00 JOD</span>
          </div>
          <div class="price-row total">
            <span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ:</span>
            <span id="totalPrice">10.00 JOD</span>
          </div>
        </div>

        <button type="submit" class="submit-btn">Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø­Ø¬Ø²</button>
      </form>
    </div>

    <div class="success-message" id="successMessage">
      <div class="success-icon">
        <svg viewBox="0 0 24 24" fill="none">
          <polyline points="20 6 9 17 4 12"></polyline>
        </svg>
      </div>
      <h3 class="success-title">ØªÙ… Ø§Ù„Ø­Ø¬Ø² Ø¨Ù†Ø¬Ø§Ø­! ğŸ‰</h3>
      <p class="success-text">
        Ø´ÙƒØ±Ø§Ù‹ Ù„Ø­Ø¬Ø²Ùƒ! Ø³ÙŠØªÙ… Ù…Ø±Ø§Ø¬Ø¹Ø© Ø·Ù„Ø¨Ùƒ ÙÙŠ Ø£Ù‚Ø±Ø¨ ÙˆÙ‚Øª. ÙŠÙ…ÙƒÙ†Ùƒ Ù…ØªØ§Ø¨Ø¹Ø© Ø­Ø§Ù„Ø© ØªØ°ÙƒØ±ØªÙƒ Ù…Ù† Ù‚Ø³Ù… <a href="/requests.html" class="arrival-link">Ø§Ù„Ø·Ù„Ø¨Ø§Øª</a>ØŒ ÙˆØ³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹ Ø¹Ø¨Ø± Ù‚Ø³Ù… <a href="/requests.html" class="arrival-link">Ø§Ù„Ø·Ù„Ø¨Ø§Øª</a>.
      </p>
    </div>
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getDatabase, ref, set, get, update } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";
import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyA1GJXtlTU38EUJc33sVBdjq17uK_dPcAI",
  authDomain: "t7di-wtn.firebaseapp.com",
  databaseURL: "https://t7di-wtn-default-rtdb.firebaseio.com",
  projectId: "t7di-wtn",
  storageBucket: "t7di-wtn.firebasestorage.app",
  messagingSenderId: "156578457028",
  appId: "1:156578457028:web:33164036f0fa1b1066b091",
  measurementId: "G-DC212XC47M"
};

const app = initializeApp(firebaseConfig);
const database = getDatabase(app);
const auth = getAuth(app);

let currentUserData = null;
let currentUserId = null;

onAuthStateChanged(auth, async (user) => {
  if (user) {
    currentUserId = user.uid;
    const userRef = ref(database, `users/${user.uid}`);
    const snapshot = await get(userRef);
    if (snapshot.exists()) {
      currentUserData = snapshot.val();
    }
  }
});

const CLOUDINARY_CONFIG = {
  cloud_name: "dh2ullgpr",
};

async function uploadToCloudinary(file) {
  try {
    const url = `https://api.cloudinary.com/v1_1/${CLOUDINARY_CONFIG.cloud_name}/upload`;
    const formData = new FormData();
    formData.append("file", file);
    formData.append("upload_preset", "ml_default");
    
    const res = await fetch(url, {
      method: "POST",
      body: formData,
    });
    
    const data = await res.json();
    
    if (!res.ok || data.error) {
      console.error('Cloudinary error:', data);
      throw new Error(data.error?.message || 'ÙØ´Ù„ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© Ø¥Ù„Ù‰ Cloudinary');
    }
    
    if (!data.secure_url) {
      throw new Error('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© Ù…Ù† Cloudinary');
    }
    
    return data.secure_url;
  } catch (error) {
    console.error('Upload error:', error);
    throw error;
  }
}

function getDeviceInfo() {
  const userAgent = navigator.userAgent;
  const platform = navigator.platform;
  const language = navigator.language;
  const screenResolution = `${window.screen.width}x${window.screen.height}`;
  const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
  
  let browser = 'Unknown';
  if (userAgent.indexOf('Firefox') > -1) browser = 'Firefox';
  else if (userAgent.indexOf('Chrome') > -1) browser = 'Chrome';
  else if (userAgent.indexOf('Safari') > -1) browser = 'Safari';
  else if (userAgent.indexOf('Edge') > -1) browser = 'Edge';
  
  let os = 'Unknown';
  if (userAgent.indexOf('Windows') > -1) os = 'Windows';
  else if (userAgent.indexOf('Mac') > -1) os = 'MacOS';
  else if (userAgent.indexOf('Linux') > -1) os = 'Linux';
  else if (userAgent.indexOf('Android') > -1) os = 'Android';
  else if (userAgent.indexOf('iOS') > -1) os = 'iOS';
  
  let deviceType = 'Desktop';
  if (/Mobile|Android|iPhone/i.test(userAgent)) deviceType = 'Mobile';
  else if (/Tablet|iPad/i.test(userAgent)) deviceType = 'Tablet';
  
  return {
    userAgent,
    platform,
    language,
    screenResolution,
    timezone,
    browser,
    os,
    deviceType,
    timestamp: new Date().toISOString()
  };
}

async function getUserIP() {
  try {
    const response = await fetch('https://api.ipify.org?format=json');
    const data = await response.json();
    return data.ip;
  } catch (error) {
    return 'Unknown';
  }
}

const ticketsData = {
  basic: {
    name: 'Basic Ticket',
    price: 10,
    discountedPrice: 3,
    discount: 7,
    limit: 300,
    description: 'Ø¯Ø®ÙˆÙ„ Ø¹Ø§Ø¯ÙŠ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§ØªØŒ Ù…Ù†Ø§Ø³Ø¨ Ù„Ù…Ø¹Ø¸Ù… Ø§Ù„Ø­Ø¶ÙˆØ±.'
  },
  squad: {
    name: 'Squad Ticket',
    price: 30,
    discountedPrice: 9,
    discount: 21,
    limit: 200,
    description: 'ØµØ§Ù„Ø­Ø© Ù„Ø«Ù„Ø§Ø«Ø© Ø£Ø´Ø®Ø§ØµØŒ ÙˆØ§Ù„Ø±Ø§Ø¨Ø¹ Ù…Ø¬Ø§Ù†Ø§Ù‹! ØªØ´Ù…Ù„ ØªØ¬Ø±Ø¨Ø© Ù…Ù…ÙŠØ²Ø©ØŒ ÙˆØµÙˆÙ„ Ø³Ø±ÙŠØ¹ØŒ ÙˆÙ…Ù‚Ø§Ø¹Ø¯ Ù…Ø±ÙŠØ­Ø©.'
  },
  vip: {
    name: 'VIP Ticket',
    price: 40,
    discountedPrice: 25,
    discount: 15,
    limit: 100,
    description: 'Ù…Ø²Ø§ÙŠØ§ Ø¥Ø¶Ø§ÙÙŠØ©: Ù…Ù†Ø§Ø·Ù‚ VIP Ø­ØµØ±ÙŠØ©ØŒ ØªØ¬Ø±Ø¨Ø© Ù…Ù…ÙŠØ²Ø© Ù„Ø§ ØªÙÙ†Ø³Ù‰ØŒ Ø®Ø¯Ù…Ø© Ù…Ù…ØªØ§Ø²Ø©ØŒ Ø£Ø¬ÙˆØ§Ø¡ ÙØ±ÙŠØ¯Ø©.'
  }
};

const ticketsCount = {
  basic_ticket: 400,
  squad_ticket: 300,
  vip_ticket: 200
};

let currentTicket = null;
let currentTicketType = null;
let appliedDiscount = 0;
let discountCreator = null;
let isDiscountApplied = false;

window.openModal = function(ticketType) {
  currentTicket = ticketsData[ticketType];
  currentTicketType = ticketType;
  document.getElementById('modalTitle').textContent = currentTicket.name;
  document.getElementById('finalPrice').textContent = currentTicket.price + ' JOD';
  document.getElementById('basePrice').textContent = currentTicket.price.toFixed(2) + ' JOD';
  document.getElementById('originalPrice').classList.remove('active');
  document.getElementById('finalPrice').classList.remove('discounted');
  updateTotalPrice();
  document.getElementById('ticketModal').classList.add('active');
  document.body.style.overflow = 'hidden';
  
  const squadSection = document.getElementById('squadMembersSection');
  if(ticketType === 'squad') {
    squadSection.style.display = 'block';
    document.getElementById('member2').required = true;
    document.getElementById('member3').required = true;
    document.getElementById('member4').required = true;
  } else {
    squadSection.style.display = 'none';
    document.getElementById('member2').required = false;
    document.getElementById('member3').required = false;
    document.getElementById('member4').required = false;
  }
}

document.getElementById('fullNameInput').addEventListener('input', function() {
  document.getElementById('member1').value = this.value;
});

window.closeModal = function() {
  document.getElementById('ticketModal').classList.remove('active');
  document.body.style.overflow = 'auto';
  resetForm();
}

window.togglePaymentMethod = function(method) {
  const zaincashMethod = document.getElementById('zaincashMethod');
  const arrivalMethod = document.getElementById('arrivalMethod');
  const zaincashInfo = document.getElementById('zaincashInfo');
  const zaincashFields = document.getElementById('zaincashFields');
  const arrivalInfo = document.getElementById('arrivalInfo');
  const taxInfo = document.getElementById('taxInfo');
  const taxRow = document.getElementById('taxRow');
  
  if (method === 'zaincash') {
    zaincashMethod.classList.add('active');
    arrivalMethod.classList.remove('active');
    zaincashInfo.classList.add('active');
    arrivalInfo.classList.remove('active');
    zaincashFields.style.display = 'block';
    taxInfo.classList.remove('active');
    taxRow.style.display = 'none';
    
    document.querySelector('input[name="senderPhone"]').required = true;
    document.querySelector('input[name="paymentProof"]').required = true;
  } else {
    zaincashMethod.classList.remove('active');
    arrivalMethod.classList.add('active');
    zaincashInfo.classList.remove('active');
    arrivalInfo.classList.add('active');
    zaincashFields.style.display = 'none';
    taxInfo.classList.add('active');
    taxRow.style.display = 'flex';
    
    document.querySelector('input[name="senderPhone"]').required = false;
    document.querySelector('input[name="paymentProof"]').required = false;
  }
  
  updateTotalPrice();
}

window.previewImage = function(input) {
  const preview = document.getElementById('filePreview');
  const previewImg = document.getElementById('previewImg');
  
  if (input.files && input.files[0]) {
    const reader = new FileReader();
    reader.onload = function(e) {
      previewImg.src = e.target.result;
      preview.classList.add('active');
    };
    reader.readAsDataURL(input.files[0]);
  }
}

window.applyDiscount = async function() {
  const codeInput = document.querySelector('input[name="discountCode"]');
  const code = codeInput.value.trim();
  const message = document.getElementById('discountMessage');
  const applyBtn = document.querySelector('.apply-discount-btn');
  
  if (!code) {
    message.className = 'discount-message error';
    message.textContent = 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙˆØ¯ Ø§Ù„Ø®ØµÙ…';
    return;
  }
  
  applyBtn.disabled = true;
  applyBtn.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...';
  message.className = 'discount-message';
  message.textContent = '';
  
  try {
    const discountRef = ref(database, `invite/${code}`);
    const snapshot = await get(discountRef);
    
    if (!snapshot.exists()) {
      message.className = 'discount-message error';
      message.textContent = 'âœ— ÙƒÙˆØ¯ Ø§Ù„Ø®ØµÙ… ØºÙŠØ± ØµØ­ÙŠØ­';
      applyBtn.disabled = false;
      applyBtn.textContent = 'ØªØ·Ø¨ÙŠÙ‚';
      return;
    }
    
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ø§ ÙŠØ³ØªØ®Ø¯Ù… ÙƒÙˆØ¯ Ø§Ù„Ø¥Ø­Ø§Ù„Ø© Ø§Ù„Ø®Ø§Øµ Ø¨Ù‡
    if (currentUserData && currentUserData.invitecode && currentUserData.invitecode.toUpperCase() === code.toUpperCase()) {
      message.className = 'discount-message error';
      message.textContent = 'âœ— Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒÙˆØ¯ Ø§Ù„Ø¥Ø­Ø§Ù„Ø© Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ';
      applyBtn.disabled = false;
      applyBtn.textContent = 'ØªØ·Ø¨ÙŠÙ‚';
      return;
    }
    
    const username = currentUserData.user;
    const ticketTypes = ['basic_ticket', 'vip_ticket', 'squad_ticket'];
    
    for (const ticketType of ticketTypes) {
      const usageRef = ref(database, `invite/${code}/${ticketType}/use/${username}`);
      const usageSnapshot = await get(usageRef);
      
      if (usageSnapshot.exists()) {
        message.className = 'discount-message error';
        message.textContent = 'âœ— Ø£Ù†Øª Ø§Ø³ØªØ®Ø¯Ù…Øª Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ù…Ù† Ù‚Ø¨Ù„! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒÙˆØ¯ Ø¥Ø­Ø§Ù„Ø© Ø¢Ø®Ø± Ù„Ù„Ø§Ø³ØªÙØ§Ø¯Ø©';
        applyBtn.disabled = false;
        applyBtn.textContent = 'ØªØ·Ø¨ÙŠÙ‚';
        return;
      }
    }
    
    appliedDiscount = currentTicket.discount;
    discountCreator = code;
    isDiscountApplied = true;
    
    const originalPriceEl = document.getElementById('originalPrice');
    const finalPriceEl = document.getElementById('finalPrice');
    
    originalPriceEl.textContent = currentTicket.price + ' JOD';
    originalPriceEl.classList.add('active');
    finalPriceEl.textContent = currentTicket.discountedPrice + ' JOD';
    finalPriceEl.classList.add('discounted');
    
    message.className = 'discount-message success';
    message.textContent = `âœ“ ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø®ØµÙ…! ÙˆÙØ±Øª ${appliedDiscount} JOD`;
    
    document.getElementById('basePrice').classList.add('striked');
    document.getElementById('discountRow').style.display = 'flex';
    document.getElementById('discountAmount').textContent = '-' + appliedDiscount.toFixed(2) + ' JOD';
    updateTotalPrice();
    codeInput.disabled = true;
    applyBtn.textContent = 'ØªÙ… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚';
  } catch (error) {
    console.error('Error validating discount code:', error);
    message.className = 'discount-message error';
    message.textContent = 'âœ— Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙƒÙˆØ¯';
    applyBtn.disabled = false;
    applyBtn.textContent = 'ØªØ·Ø¨ÙŠÙ‚';
  }
}

function updateTotalPrice() {
  if (!currentTicket) return;
  
  let total = isDiscountApplied ? currentTicket.discountedPrice : currentTicket.price;
  const paymentMethod = document.querySelector('input[name="payment"]:checked').value;
  
  if (paymentMethod === 'arrival') {
    total += 0.39;
  }
  
  document.getElementById('totalPrice').textContent = total.toFixed(2) + ' JOD';
  
  const totalRow = document.querySelector('.price-row.total');
  if (isDiscountApplied) {
    totalRow.classList.add('discounted-total');
  } else {
    totalRow.classList.remove('discounted-total');
  }
}

document.getElementById('ticketForm').addEventListener('submit', async function(e) {
  e.preventDefault();
  
  const submitBtn = this.querySelector('.submit-btn');
  submitBtn.disabled = true;
  submitBtn.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...';
  
  try {
    const formData = new FormData(this);
    const paymentMethod = formData.get('payment');
    const deviceInfo = getDeviceInfo();
    const userIP = await getUserIP();
    
    if (!currentUserData || !currentUserId) {
      throw new Error('ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹');
    }
    
    const ticketTypeKey = currentTicketType + '_ticket';
    
    let paymentProofUrl = '';
    
    if (paymentMethod === 'zaincash') {
      const paymentProofFile = formData.get('paymentProof');
      if (paymentProofFile && paymentProofFile.size > 0) {
        submitBtn.textContent = 'Ø¬Ø§Ø±ÙŠ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©...';
        paymentProofUrl = await uploadToCloudinary(paymentProofFile);
      } else {
        throw new Error('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø±ÙØ¹ ØµÙˆØ±Ø© Ø¥Ø«Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹');
      }
    }
    
    let finalPrice = isDiscountApplied ? currentTicket.discountedPrice : currentTicket.price;
    const priceBeforeDiscount = currentTicket.price;
    const priceAfterDiscount = isDiscountApplied ? currentTicket.discountedPrice : currentTicket.price;
    
    if (paymentMethod === 'arrival') {
      finalPrice += 0.39;
    }
    
    const timestamp = Date.now();
    const username = currentUserData.user;
    
    async function generateUniqueTicketId() {
      const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
      const numbers = '0123456789';
      let ticketId = '';
      let isUnique = false;
      
      while (!isUnique) {
        ticketId = '';
        for (let i = 0; i < 15; i++) {
          ticketId += chars.charAt(Math.floor(Math.random() * chars.length));
        }
        for (let i = 0; i < 15; i++) {
          ticketId += numbers.charAt(Math.floor(Math.random() * numbers.length));
        }
        ticketId = ticketId.split('').sort(() => Math.random() - 0.5).join('');
        
        const zaincashBasicCheck = await get(ref(database, `tickets/zaincash/basic_ticket/${ticketId}`));
        const zaincashVipCheck = await get(ref(database, `tickets/zaincash/vip_ticket/${ticketId}`));
        const zaincashSquadCheck = await get(ref(database, `tickets/zaincash/squad_ticket/${ticketId}`));
        const cashBasicCheck = await get(ref(database, `tickets/cash/basic_ticket/${ticketId}`));
        const cashVipCheck = await get(ref(database, `tickets/cash/vip_ticket/${ticketId}`));
        const cashSquadCheck = await get(ref(database, `tickets/cash/squad_ticket/${ticketId}`));
        
        if (!zaincashBasicCheck.exists() && !zaincashVipCheck.exists() && !zaincashSquadCheck.exists() &&
            !cashBasicCheck.exists() && !cashVipCheck.exists() && !cashSquadCheck.exists()) {
          isUnique = true;
        }
      }
      
      return ticketId;
    }
    
    const uniqueTicketId = await generateUniqueTicketId();
    
    const ticketData = {
      ticketType: currentTicket.name,
      ticketPrice: currentTicket.price,
      finalPrice: finalPrice,
      paymentMethod: paymentMethod === 'zaincash' ? 'Zain Cash' : 'cash',
      fullName: formData.get('fullName'),
      email: currentUserData.email,
      whatsapp: currentUserData.phone,
      userId: username,
      username: username,
      discountCode: formData.get('discountCode') || '',
      invitecode: discountCreator || '',
      discountAmount: appliedDiscount || 0,
      finalPriceAfterDiscount: isDiscountApplied ? currentTicket.discountedPrice : currentTicket.price,
      timestamp: new Date().toISOString(),
      status: 'pending',
      deviceInfo: deviceInfo,
      ipAddress: userIP
    };
    
    if(currentTicketType === 'squad') {
      ticketData.members = {
        member1: formData.get('member1') || formData.get('fullName'),
        member2: formData.get('member2'),
        member3: formData.get('member3'),
        member4: formData.get('member4')
      };
    }
    
    if (paymentMethod === 'zaincash') {
      ticketData.phonezaincash = formData.get('senderPhone');
      ticketData.paymentProofUrl = paymentProofUrl;
    }
    
    submitBtn.textContent = 'Ø¬Ø§Ø±ÙŠ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...';
    
    const paymentType = paymentMethod === 'zaincash' ? 'zaincash' : 'cash';
    const ticketPath = `tickets/${paymentType}/${ticketTypeKey}/${uniqueTicketId}`;
    
    await set(ref(database, ticketPath), ticketData);
    
    const requestTicketData = {
      ticketType: currentTicket.name,
      ticketTypeKey: ticketTypeKey,
      paymentMethod: paymentMethod === 'zaincash' ? 'Ø²ÙŠÙ† ÙƒØ§Ø´' : 'Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„ÙˆØµÙˆÙ„',
      userName: username,
      fullName: formData.get('fullName'),
      email: currentUserData.email,
      phone: currentUserData.phone,
      userProfile: currentUserData.profile || '',
      verified: currentUserData.verified || false,
      verifiedBadge: (currentUserData.verified || false) ? 'verified.png' : '',
      priceBeforeDiscount: priceBeforeDiscount,
      priceAfterDiscount: priceAfterDiscount,
      finalPrice: finalPrice,
      discountAmount: appliedDiscount || 0,
      status: 'pending',
      createdAt: timestamp,
      ticketId: uniqueTicketId
    };
    
    if (paymentMethod === 'zaincash') {
      requestTicketData.phonezaincash = formData.get('senderPhone');
      requestTicketData.paymentProofUrl = paymentProofUrl;
    }
    
    const requestsRef = ref(database, `requests/${currentUserId}`);
    const requestsSnapshot = await get(requestsRef);
    const ticketFieldName = paymentMethod === 'zaincash' ? 'zaincash_ticket' : 'cash_ticket';
    
    if (requestsSnapshot.exists()) {
      await update(requestsRef, {
        [ticketFieldName]: requestTicketData
      });
    } else {
      await set(requestsRef, {
        createdAt: timestamp,
        [ticketFieldName]: requestTicketData
      });
    }
    
    if (discountCreator) {
      const userId = username;
      const discountPath = `invite/${discountCreator}/${ticketTypeKey}/use/${userId}`;
      
      const discountData = {
        userId: username,
        username: username,
        idticket: uniqueTicketId,
        fullName: ticketData.fullName,
        email: ticketData.email,
        whatsapp: ticketData.whatsapp,
        ticketType: ticketData.ticketType,
        discountAmount: ticketData.discountAmount,
        originalPrice: ticketData.ticketPrice,
        finalPrice: ticketData.finalPriceAfterDiscount,
        bookingTimestamp: ticketData.timestamp,
        paymentMethod: ticketData.paymentMethod,
        phonezaincash: ticketData.phonezaincash || '',
        profile: currentUserData.profile || '',
        approved: false,
        browser: deviceInfo.browser || 'Unknown',
        deviceType: deviceInfo.deviceType || 'Unknown'
      };
      
      await set(ref(database, discountPath), discountData);
      
      const pointsMap = { 'basic_ticket': 10, 'squad_ticket': 20, 'vip_ticket': 30 };
      const pointsToAdd = pointsMap[ticketTypeKey] || 10;
      
      const inviteRef = ref(database, `invite/${discountCreator}`);
      const inviteSnap = await get(inviteRef);
      const inviteData = inviteSnap.exists() ? inviteSnap.val() : {};
      
      const currentTicketData = inviteData[ticketTypeKey] || { points: 0, requests_points: 0 };
      const currentRequestsPoints = currentTicketData.requests_points || 0;
      const allrequestspoints = inviteData.allrequestspoints || 0;
      const allpoints = inviteData.allpoints || 0;
      
      const updates = {};
      updates[`invite/${discountCreator}/${ticketTypeKey}/requests_points`] = currentRequestsPoints + pointsToAdd;
      updates[`invite/${discountCreator}/allrequestspoints`] = allrequestspoints + pointsToAdd;
      updates[`invite/${discountCreator}/allpoints`] = allpoints;
      updates[`invite/${discountCreator}/${ticketTypeKey}/points`] = currentTicketData.points || 0;
      
      await update(ref(database), updates);
    }
    
    document.getElementById('formContent').style.display = 'none';
    document.getElementById('successMessage').classList.add('active');
    
    setTimeout(() => {
      closeModal();
    }, 5000);
    
  } catch (error) {
    console.error('Error:', error);
    showToast('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­Ø¬Ø²', error.message, 'error');
    submitBtn.disabled = false;
    submitBtn.textContent = 'Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø­Ø¬Ø²';
  }
});

function showToast(title, message, type = 'info') {
  const container = document.getElementById('toastContainer');
  const icons = {
    success: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>`,
    error: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>`,
    warning: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>`,
    info: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>`
  };
  
  const toast = document.createElement('div');
  toast.className = `toast ${type}`;
  toast.innerHTML = `
    <div class="toast-icon">${icons[type]}</div>
    <div class="toast-content">
      <div class="toast-title">${title}</div>
      <div class="toast-message">${message}</div>
    </div>
    <button class="toast-close">âœ•</button>
    <div class="toast-progress"></div>
  `;
  
  container.appendChild(toast);
  
  toast.querySelector('.toast-close').onclick = () => {
    toast.classList.add('hide');
    setTimeout(() => toast.remove(), 300);
  };
  
  setTimeout(() => {
    if (toast.parentNode) {
      toast.classList.add('hide');
      setTimeout(() => toast.remove(), 300);
    }
  }, 5000);
}

function resetForm() {
  document.getElementById('ticketForm').reset();
  document.getElementById('formContent').style.display = 'block';
  document.getElementById('successMessage').classList.remove('active');
  document.getElementById('filePreview').classList.remove('active');
  document.getElementById('discountMessage').className = 'discount-message';
  document.getElementById('discountRow').style.display = 'none';
  document.querySelector('input[name="discountCode"]').disabled = false;
  document.getElementById('originalPrice').classList.remove('active');
  document.getElementById('finalPrice').classList.remove('discounted');
  document.getElementById('basePrice').classList.remove('striked');
  document.querySelector('.price-row.total').classList.remove('discounted-total');
  appliedDiscount = 0;
  discountCreator = null;
  isDiscountApplied = false;
  togglePaymentMethod('zaincash');
  document.querySelector('.submit-btn').disabled = false;
  document.querySelector('.submit-btn').textContent = 'Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø­Ø¬Ø²';
}

document.getElementById('ticketModal').addEventListener('click', function(e) {
  if (e.target === this) {
    closeModal();
  }
});

document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    closeModal();
  }
});

(function() {
  document.addEventListener('contextmenu', function(e) {
    e.preventDefault();
    return false;
  });
  
  document.addEventListener('keydown', function(e) {
    if (e.key === 'F12' || 
        (e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'J' || e.key === 'C')) ||
        (e.ctrlKey && e.key === 'U') ||
        (e.metaKey && e.altKey && (e.key === 'I' || e.key === 'J' || e.key === 'C'))) {
      e.preventDefault();
      return false;
    }
  });
  
  setInterval(function() {
    const widthThreshold = window.outerWidth - window.innerWidth > 160;
    const heightThreshold = window.outerHeight - window.innerHeight > 160;
    if (widthThreshold || heightThreshold) {
      document.body.innerHTML = '';
    }
  }, 1000);
  
  (function() {
    const devtools = { open: false };
    const threshold = 160;
    
    const checkDevTools = function() {
      if (window.outerWidth - window.innerWidth > threshold || 
          window.outerHeight - window.innerHeight > threshold) {
        if (!devtools.open) {
          devtools.open = true;
          document.body.innerHTML = '';
        }
      }
    };
    
    setInterval(checkDevTools, 500);
  })();
  
  if (window.console) {
    Object.defineProperty(window.console, '_commandLineAPI', {
      get: function() {
        throw new Error('DevTools detected');
      }
    });
  }
})();
</script>

</body>
</html>